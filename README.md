# AtCoder_base64

## これはなに？

もともとは tanakh さんの [cargo-atcoder](https://github.com/tanakh/cargo-atcoder) のバイナリ提出を見てこんなことできるのか、面白いなあと思ったのがきっかけ。実行ファイルのバイナリをエンコードしたりデコードしたりといった処理は必ずしも Rust である必要はなくて、むしろ Python のようなスクリプト言語の方が書きやすいのでは？と思い書いてみた。```python3 bin.py hoge.cc``` のように実行すると ```hoge.cc``` の実行ファイルのバイナリを埋め込んだ ```hoge.py``` が生成されます。cargo-atcoder とは異なる規格？でバイナリをエンコードしているので、このツールの方がサイズが小さくなっているようです。

### オプション

- ```-o``` : オリジナルコードをコメントアウトされた状態で挿入します。
- ```-z``` : バイナリを zlib で圧縮します。3 分の 1 くらいに圧縮できることが多い。

AtCoder のジャッジ環境ではどうやら Python 実行時に入る処理を利用すると実行時間外でファイル書き込みもできるみたいだけど、あまりにも環境依存なのでここに機能としては追加していません。

## メリット

バイナリを直接埋め込んでいるため実行時間がほとんど犠牲にならないこと(40ms くらいは余分にかかる)、好きなコンパイルオプションを使えること、C++20 等のジャッジサーバに入っていない環境の機能も気にせず使えること等。個人的な動機としては C++20 で導入される ```<numbers>``` というヘッダを使ってみたかったというのがあります。C++ に限らず、コンパイルしてバイナリを生成する言語なら bin.py を適宜書き換えることで同様のことが可能なはずです(未検証)。

## デメリット

将来的に AtCoder でバイナリ提出が制限される可能性がそこそこあります。

## 注意

Mac OS で実行、生成したコードを提出すると WA になるみたいです。WSL(Ubuntu 18.04) と AtCoder のジャッジサーバの環境では正しく動作します。
